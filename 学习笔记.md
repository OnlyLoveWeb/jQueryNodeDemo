# jQuery学习笔记

## 01--jQuery的基本使用

- **引入jQuery**

  - ```
    npm install jquery
    ```

  - ```javascript
    <script src="../node_modules/jquery/dist/jquery.min.js"></script>
    ```

- ```html
  <body>
    <script> 
      $(function() {
        $('div').hide();
      })
    </script>
    <div>
  
    </div>
  </body>
  ```

  等着页面加载完毕再去执行js代码

- 等着DOM结构渲染完毕即可执行内部代码，不必等到所有外部资源加载完毕；
- 相当于原生js中的DOMContentLoaded；
- 不同于原生js中的load事件是等页面文档、外部js文件、css文件、图片加载完才执行内部代码；
- **JQuery的顶级对象$**
  - $是jQuery的别称；
  - $是jQuery的顶级对象，相当于原生JavaScript的window。把元素利用$包装成jQuery对象，就可以使用jQuery的方法；

- **jQuery的对象和DOM对象**
  - jQuery获取对象的方式是：
    - $(‘div’),$(.class),$(#id)等等；
  - js原生获取对象的方式是：
    - var div = document.getElementsByTagName(‘div’)等等；
  - jQuery获取的对象和js原生获取的对象之间，方法不能混用；

- DOM对象与jQuery对象之间的互相转换

  - 为什么需要转换

    - 因为原生的js比jQuery更大，原生的一些属性和方法jQuery没有进行封装，要想使用这些属性和方法需要把jQuery对象转换为DOM对象才能使用；

  - 如何转换

    - 原生js对象转换为jQuery对象：

      - ```javascript
        var myDiv = document.getElementById('#id')
        ```

      - $(myDiv)这样即可转换

    - jQuery对象转换为DOM对象：

      - ```
        //第一种
        $('video')[0]
        //第二种
        $('video').get[0]
        ```


## 02--jQuery常用API

### 02-01 jquery基础选择器

- $("选择器")     //里面选择器直接写css选择器即可，但是要加引号；

  - | 名称       | 用法             | 描述                     |
    | ---------- | ---------------- | ------------------------ |
    | ID选择器   | $("#id")         | 获取指定ID的元素         |
    | 全选选择器 | $("*")           | 匹配所有元素             |
    | 类选择器   | $(".class")      | 获取同一类class元素      |
    | 标签选择器 | $("div")         | 获取同一类标签的所有元素 |
    | 并集选择器 | $("div,p,li")    | 选取多个元素             |
    | 交集选择器 | $("lli.current") | 交集元素                 |

### 02-02 jquery层级选择器

| 名称       | 用法       | 描述                                                         |
| ---------- | ---------- | ------------------------------------------------------------ |
| 子代选择器 | $('ul>li') | 使用>号，获取亲儿子的层级元素；注意，并不会获取孙子层级的元素 |
| 后代选择器 | $('ul li') | 使用空格，代表后代选择器，获取ul下边的所有li元素，包括孙子等 |

### 02-03jquery隐式迭代

- 隐式迭代
  - 遍历内部DOM元素（伪数组形式存储）的过程叫做隐式迭代；
  - 给匹配到的所有元素进行循环遍历，执行相应的方法，而不用我们再进行循环，简化我们的操作；

### 02-04 jquery筛选选择器

| 语法       | 用法          | 描述                                                 |
| ---------- | ------------- | ---------------------------------------------------- |
| :first     | $('li:first') | 获取第一个li元素                                     |
| :last      | $('li:last')  | 获取最后一个li元素                                   |
| :eq(index) | $('li:eq(2)') | 获取到的li元素中，选择索引号为2的元素，索引号从0开始 |
| :odd       | $('li:odd')   | 获取到的li元素中，选择索引号为奇数的元素             |
| :even      | $('li:even')  | 获取到的li元素在，选择索引号为偶数的元素             |

### 02-05 jQuery筛选方法

![1](./pic/筛选方法.png)

### 02-06下拉菜单

```html
<style>
    * {
      margin: 0;
      padding: 0;
    }
    li {
      list-style: none;
    }
    a {
      text-decoration: none;
      width: 50px;
      display: block;
      border-bottom: 1px solid black;
     
    }
    .nav {
      margin-left: 20px;
      margin-top: 20px;
    }
    .nav>li {
      float: left;
      font-size: 8px;
      border-left: 1px solid black;
      border-right: 1px solid black;
      border-top: 1px solid black;
      text-align: center;
      margin-left: -1px;
    }
    .nav>li>ul {
      display: none;
    }
  </style>
</head>
<body>
  <ul class="nav">
    <li>
      <a href="#">微博</a>
      <ul>
        <li>
          <a href="#">私信</a>
        </li>
        <li>
          <a href="#">评论</a>
        </li>
        <li>
          <a href="#">@我</a>
        </li>
      </ul>
    </li>
    <li>
      <a href="#">微博</a>
      <ul>
        <li>
          <a href="#">私信</a>
        </li>
        <li>
          <a href="#">评论</a>
        </li>
        <li>
          <a href="#">@我</a>
        </li>
      </ul>
    </li>
    <li>
      <a href="#">微博</a>
      <ul>
        <li>
          <a href="#">私信</a>
        </li>
        <li>
          <a href="#">评论</a>
        </li>
        <li>
          <a href="#">@我</a>
        </li>
      </ul>
    </li>
    <li>
      <a href="#">微博</a>
      <ul>
        <li>
          <a href="#">私信</a>
        </li>
        <li>
          <a href="#">评论</a>
        </li>
        <li>
          <a href="#">@我</a>
        </li>
      </ul>
    </li>
  </ul>
  <script>
    $(function() {
      $('.nav>li').mouseover(function() {
        $(this).children('ul').show();
      })
      $('.nav>li').mouseleave(function() {
        $(this).children('ul').hide();
      })
    })
  </script>
</body>
```

### 02-07jquery筛选方法2

- siblings: 除了自身元素之外的所有亲兄弟

  - 代码

  ```html
  <body>
    <ol>
      <li>我是ol的li</li>
      <li>我是ol的li</li>
      <li class="item">我是ol的li</li>
      <li>我是ol的li</li>
      <li>我是ol的li</li>
      <ul>
        <li>haha</li>
      </ul>
    </ol>
    <ul>
      <li>我是ul的li</li>
      <li>我是ul的li</li>
      <li>我是ul的li</li>
      <li>我是ul的li</li>
      <li>我是ul的li</li>
    </ul>
    <script>
      $(function() {
        $('ol .item').siblings().css('color', 'red')
      })
    </script>
  </body>
  ```

  - 效果

  ![1](./pic/siblings.png)

- nextAll: 插找当前元素之后的所有同辈元素

  - 代码

  ```HTML
  <body>
    <ol>
      <li>我是ol的li</li>
      <li>我是ol的li</li>
      <li class="item">我是ol的li</li>
      <li>我是ol的li</li>
      <li>我是ol的li</li>
      <ul>
        <li>haha</li>
      </ul>
    </ol>
    <ul>
      <li>我是ul的li</li>
      <li>我是ul的li</li>
      <li>我是ul的li</li>
      <li>我是ul的li</li>
      <li>我是ul的li</li>
    </ul>
    <script>
      $(function() {
        $('ol .item').nextAll().css('color', 'red')
      })
    </script>
  </body>
  ```

  
  - 效果

  ![2](./pic/nextAll.png)

- prevAll: 检查当前元素之前所有的同辈元素

  - 代码

  ```html
  <body>
    <ol>
      <li>我是ol的li</li>
      <li>我是ol的li</li>
      <li class="item">我是ol的li</li>
      <li>我是ol的li</li>
      <li>我是ol的li</li>
      <ul>
        <li>haha</li>
      </ul>
    </ol>
    <ul>
      <li>我是ul的li</li>
      <li>我是ul的li</li>
      <li>我是ul的li</li>
      <li>我是ul的li</li>
      <li>我是ul的li</li>
    </ul>
    <script>
      $(function() {
        $('ol .item').prevAll().css('color', 'red')
      })
    </script>
  </body>
  ```

  

  - 效果

  ![3](./pic/prevAll.png)

- 第n个元素

  - 选择器的方式

    - 代码

    ```html
    <body>
      <ul>
        <li>我是ul的li</li>
        <li>我是ul的li</li>
        <li>我是ul的li</li>
        <li>我是ul的li</li>
        <li>我是ul的li</li>
      </ul>
      <script>
        $(function() {
          $('ul li:eq(2)').css('color', 'green')
        })
      </script>
    </body>
    ```

    - 效果

    ![1](./pic/第n个元素1.png)

  - 选择方法的方式

    - 代码

    ```html
    <body>
      <ul>
        <li>我是ul的li</li>
        <li>我是ul的li</li>
        <li>我是ul的li</li>
        <li>我是ul的li</li>
        <li>我是ul的li</li>
      </ul>
      <script>
        $(function() {
          $('ul li'）eq(2).css('color', 'yellow')
        })
      </script>
    </body>
    ```

    - 效果

    ![1](./pic/第n个元素2.png)

- hasClass:  检查当前元素是否含有某个特定的类，如果有，返回true

  - 代码

```html
<body>
  <ul>
    <li>我是ul的li</li>
    <li>我是ul的li</li>
    <li>我是ul的li</li>
    <li>我是ul的li</li>
    <li>我是ul的li</li>
  </ul>
  <div class="current">有current</div>
  <div>没有current</div>
  <script>
    $(function() {
      console.log($('div:first').hasClass('current'));
    })
  </script>
</body>
```

### 02-08 jquery的排他思想

- 使用了jQuery的隐式迭代和siblings

  - 代码

  ```html
  <body>
    <button>点击</button>
    <button>点击</button>
    <button>点击</button>
    <button>点击</button>
    <button>点击</button>
    <button>点击</button>
    <script>
      $(function() {
        $('button').click(function() {
          $(this).css('background', 'pink');
          $(this).siblings('button').css('background', '');
        })
      })
    </script>
  </body>
  ```


  - 效果

  ![1](./pic/排他.png)


### 02-09 淘宝服饰精品

- 核心原理：鼠标经过左侧黑子的某个小li，就让内容区盒子相对应的图片显示，其余部分隐藏

- 需要得到当前li的索引号，就可以显示对应的索引号

- jQuery得到当前元素索引号$(this).index()

- 中间对应的图片，可以通过eq(index)方法选择

- 显示元素show(),隐藏元素hide()

  - 代码

  ```html
  <style>
      * {
        margin: 0;
        padding: 0;
      }
      li {
        list-style: none;
        width: 50px;
        height: 40px;
        text-align: center;
        line-height: 40px;
        border-bottom: 1px solid black;
        border-right: 1px solid black;
  
      }
      a {
        text-decoration: none;
      }
      .left {
        /* height: 270px;
        width: 50px; */
        background-color: red;
        float: left;
        border-left: 1px solid black;
        border-top: 1px solid black;
  
      }
      .right {
        width: 100px;
        height: 163px;
        background-color: blue;
        float: left;
        border-top: 1px solid black;
        border-right: 1px solid black;
        border-bottom: 1px solid black;
  
      }
      .right div {
        width: 100px;
        height: 165px;
        text-align: center;
        line-height: 165px;
      }
    </style>
  </head>
  <body>
    <div class="wrapper">
      <div class="left">
        <ul>
        <li><a href="#">美靴</a></li>
        <li><a href="#">美靴</a></li>
        <li><a href="#">美靴</a></li>
        <li><a href="#">美靴</a></li>
        </ul>
      </div>
      <div class="right">
        <div>1</div>
        <div>2</div>
        <div>3</div>
        <div>4</div>
      </div>
    </div>
    <script>
      $(function() {
        $('.right div').eq(0).siblings().css('display', 'none')
        $('.left li').mouseover(function() {
          var index = $(this).index();
          // console.log(index)
          $('.right div').eq(index).show();
          $('.right div').eq(index).siblings().hide();
        })
      })
    </script>
  </body>
  ```

  
  - 效果

  ![1](./pic/淘宝服饰精品.png)

## 03--jQuery样式操作

### 03-01 操作CSS方法

- jQuery可以使用css方法来修改简单元素样式，也可以操作类，修改多个样式；

  - 参数只写属性名，则是返回属性值

    - ```
      $(this).css('color);
      ```

  - 参数是属性名，属性值，逗号分隔，是设置一组样式，属性必须加引号，值如果是数字可以不用跟单位和引号；

    - ```
      $(this).css('color','red');
      ```

  - 参数可以是对象形式，方便设置多组样式。属性名和属性值用逗号隔开，属性不用加引号，复合属性名，使用驼峰写法，如：backgroundColor

    - ```html
      $('div').css({
              width: 100,
              height: 100,
              backgroundColor: 'blue'
            })
      ```


### 03-02 设置类样式方法

- 作用等同于以前的classList，可以操作类样式，注意操作类里面的参数不要加点；
  - 添加类

  ```html
  $('div).addClass('current')
  ```

  - 移除类

  ```html
  $('div').removeClass('current')
  ```

  - 切换类

  ```html
  $('div').toggleClass('current')
  ```

  代码

  需求一：点击一次div从空白背景变为红色背景，再点一次，又变为空白，再点，再变红。。。。。

  ```html
  <style>
      .current {
        width: 100px;
        height: 100px;
        background-color: red;
      }
      div {
        border: 1px solid black;
        width: 100px;
        height: 100px;
      }
    </style>
  </head>
  <body>
    <div>
  
    </div>
    <script>
      $(function() {
        var click = 0
        $('div').click(function() {
          if(click == 0) {
            $(this).addClass('current');
            click = 1;
          }
          else {
            $(this).removeClass('current');
            click = 0;
          }
          
        })
      })
    </script>
  </body>
  ```

  设置一个变量click，当click == 0，变红，当click != 0 时变空白；

  但是jQuery有一个更好的方法；

  toggleClass

  ```html
  <style>
      .current {
        width: 100px;
        height: 100px;
        background-color: red;
      }
      div {
        border: 1px solid black;
        width: 100px;
        height: 100px;
      }
      div:nth-child(2) {
        background-color: blue;
        width: 100px;
        height: 100px;
        transition: all 1s;
      }
      .xuanzhuan {
        transform: rotate(360deg);
      }
    </style>
  </head>
  <body>
    <div>
  
    </div>
    <div>
  
    </div>
    <script>
      $(function() {
        $('div').eq(1).click(function() {
          $(this).toggleClass('xuanzhuan');
        })
      })
    </script>03-03  tab栏切换
  ```

### 03-03 tab栏切换

- 需求：tab栏切换，点击谁，谁对应的div内容显示出来‘

- 利用jQuery的隐式迭代的循环遍历，设置类样式方法，获取被点击的索引号；

- 代码

```html
<style>
  * {
    margin: 0;
    padding: 0;
  }
  .father {
    height: 30px;
  }
  .tab-top li {
    width: 50px;
    height: 30px;
    /* background-color: #ccc; */
    display: block;
    float: left;
    text-align: center;
    cursor: pointer;
  }
  .tab-content div {
    width: 350px;
    height: 200px;
    display: none;
  }
  .current {
    background-color: red;
  }
</style>
<body>
  <div class="father">
    <div class="tab-top">
      <ul>
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
        <li>5</li>
      </ul>
    </div>
  </div>
  <div class="tab-content">
    <div>1</div>
    <div>2</div>
    <div>3</div>
    <div>4</div>
    <div>5</div>
  </div>
  <script>
    $(function() {
      $('.tab-top li').click(function() {  						      			    		  	 $(this).addClass('current').siblings().removeClass('current');
        let index = $(this).index();
        console.log(index);
        $('.tab-content div').eq(index).show().siblings().hide();
      })
    })
  </script>
</body>
```

- 效果

![ 1](.\pic\tab栏切换.png)

### 03-04 类操作与className区别

原生js中className会覆盖元素原先里面的类名；

jQuery里面的类操作只是对指定类进行操作，不影响原先的类名；

## 04--jQuery效果

### 04-01 jQuery 效果-隐藏和显示

------

隐藏、显示、切换，滑动，淡入淡出，以及动画，哇哦！

```
$(document).ready(function(){    $("#flip").click(function(){        $(".panel").toggle();    });});
```

### 04-02 jQuery hide() 和 show()

通过 jQuery，您可以使用 hide() 和 show() 方法来隐藏和显示 HTML 元素：

```
$("#hide").click(function(){  $("p").hide();}); $("#show").click(function(){  $("p").show();});
```

**语法:**

```html
$(selector).hide(speed,callback);
$(selector).show(speed,callback);
```

可选的 speed 参数规定隐藏/显示的速度，可以取以下值：”slow”、”fast” 或毫秒。

可选的 callback 参数是隐藏或显示完成后所执行的函数名称。

下面的例子演示了带有 speed 参数的 hide() 方法：

```html
$("button").click(function(){
$("p").hide(1000);
});
```

下面的例子演示了带有 speed 参数的 hide() 方法，并使用回调函数：

```
$(document).ready(function(){
	$(".hidebtn").click(function({
		$("div").hide(1000,"linear",function(){
			alert("Hide() 方法已完成!");
			});
		});
	});
```

第二个参数是一个字符串，表示过渡使用哪种缓动函数。

（译者注：jQuery自身提供”linear” 和 “swing”，其他可以使用相关的插件）。

### 04-03 jQuery toggle()

通过 jQuery，您可以使用 toggle() 方法来切换 hide() 和 show() 方法。

显示被隐藏的元素，并隐藏已显示的元素：

```
$("button").click(function(){  
	$("p").toggle();
});
```

**语法:**

```
$(selector).toggle(speed,callback);
```

可选的 speed 参数规定隐藏/显示的速度，可以取以下值：”slow”、”fast” 或毫秒。

可选的 callback 参数是隐藏或显示完成后所执行的函数名称。

- 代码

```html
<style>
  .div {
    background-color: pink;
    width: 140px;
    height: 400px;
  }
</style>
<body>
  <div>
    <button>显示</button>
    <button>隐藏</button>
    <button>切换</button>
  </div>
  <div class="div">

  </div>
  <script>
    $(function() {
      $('button').eq(0).click(function() {
        $('.div').show();
      })
      $('button').eq(1).click(function() {
        $('.div').hide();
      })
      $('button').eq(2).click(function() {
        $('.div').toggle()
      })
    })
  </script>
</body>
```

### 04-04 简洁版滑动下拉菜单

- slideDown()

通过高度变化（向下增大）来动态地显示所有匹配的元素，在显示完成后可选地触发一个回调函数。

这个动画效果只调整元素的高度，可以使匹配的元素以“滑动”的方式显示出来。在jQuery 1.3中，上下的padding和margin也会有动画，效果更流畅。

**speed**:三种预定速度之一的字符串("slow","normal", or "fast")或表示动画时长的毫秒数值(如：1000)

**easing**:(Optional) 用来指定切换效果，默认是"swing"，可用参数"linear"

**fn**在动画完成时执行的函数，每个元素执行一次。

- slideUp()

通过高度变化（向上减小）来动态地隐藏所有匹配的元素，在隐藏完成后可选地触发一个回调函数。

这个动画效果只调整元素的高度，可以使匹配的元素以“滑动”的方式隐藏起来。在jQuery 1.3中，上下的padding和margin也会有动画，效果更流畅。

**speed**:三种预定速度之一的字符串("slow","normal", or "fast")或表示动画时长的毫秒数值(如：1000)

**easing**:(Optional) 用来指定切换效果，默认是"swing"，可用参数"linear"

**fn**:在动画完成时执行的函数，每个元素执行一次。

- slideToggle()

通过高度变化来切换所有匹配元素的可见性，并在切换完成后可选地触发一个回调函数。

这个动画效果只调整元素的高度，可以使匹配的元素以“滑动”的方式隐藏或显示。在jQuery 1.3中，上下的padding和margin也会有动画，效果更流畅。

**speed**:三种预定速度之一的字符串("slow","normal", or "fast")或表示动画时长的毫秒数值(如：1000)

**easing**:(Optional) 用来指定切换效果，默认是"swing"，可用参数"linear"

**fn**:在动画完成时执行的函数，每个元素执行一次。

- hover()

一个模仿悬停事件（鼠标移动到一个对象上面及移出这个对象）的方法。这是一个自定义的方法，它为频繁使用的任务提供了一种“保持在其中”的状态。

当鼠标移动到一个匹配的元素上面时，会触发指定的第一个函数。当鼠标移出这个元素时，会触发指定的第二个函数。而且，会伴随着对鼠标是否仍然处在特定元素中的检测（例如，处在div中的图像），如果是，则会继续保持“悬停”状态，而不触发移出事件（修正了使用mouseout事件的一个常见错误）。

参数

over:鼠标移到元素上要触发的函数

out:鼠标移出元素要触发的函数

```
* {
    margin: 0;
    padding: 0;
  }
  li {
    list-style: none;
  }
  a {
    text-decoration: none;
    width: 50px;
    display: block;
    border-bottom: 1px solid black;
   
  }
  .nav {
    margin-left: 20px;
    margin-top: 20px;
  }
  .nav>li {
    float: left;
    font-size: 8px;
    border-left: 1px solid black;
    border-right: 1px solid black;
    border-top: 1px solid black;
    text-align: center;
    margin-left: -1px;
  }
  .nav>li>ul {
    display: none;
  }
</style>
<body>
  <ul class="nav">
    <li>
      <a href="#">微博</a>
      <ul>
        <li>
          <a href="#">私信</a>
        </li>
        <li>
          <a href="#">评论</a>
        </li>
        <li>
          <a href="#">@我</a>
        </li>
      </ul>
    </li>
    <li>
      <a href="#">微博</a>
      <ul>
        <li>
          <a href="#">私信</a>
        </li>
        <li>
          <a href="#">评论</a>
        </li>
        <li>
          <a href="#">@我</a>
        </li>
      </ul>
    </li>
    <li>
      <a href="#">微博</a>
      <ul>
        <li>
          <a href="#">私信</a>
        </li>
        <li>
          <a href="#">评论</a>
        </li>
        <li>
          <a href="#">@我</a>
        </li>
      </ul>
    </li>
    <li>
      <a href="#">微博</a>
      <ul>
        <li>
          <a href="#">私信</a>
        </li>
        <li>
          <a href="#">评论</a>
        </li>
        <li>
          <a href="#">@我</a>
        </li>
      </ul>
    </li>
  </ul>
  <script>
    $(function() {
      // $('.nav>li').mouseover(function() {
      //   $(this).children('ul').slideDown()
      // })
      // $('.nav>li').mouseout(function() {
      //   $(this).children('ul').slideUp()
      // })
      // $('.nav>li').hover(function() {
      //   $(this).children('ul').slideDown()
      // }, function() {
      //   $(this).children('ul').slideUp()
      // })
      $('.nav>li').hover(function() {
        $(this).children('ul').slideToggle()
      })
    })
  </script>
```

### 04-05 动画队列及停止排队方法

- 动画或者效果一旦触发就执行，如果多次触发，就造成多个动画或者效果排队执行；

- 停止排队

  - stop()

  stop()方法用于停止动画或效果；

  stop（)写到动画或者效果的前面，相当于停止结束上一次动画。

- 代码

```
$('.nav>li').hover(function() {
        $(this).children('ul').stop().slideToggle()
      })
```

